import{d as u}from"./utils.DdGZ3POZ.js";function g(s,p){const n=s&&s.navigator,i=s&&s.MediaStreamTrack;if(n.getUserMedia=function(o,a,t){u("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(o).then(a,t)},!(p.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const o=function(t,e,r){e in t&&!(r in t)&&(t[r]=t[e],delete t[e])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(t){return typeof t=="object"&&typeof t.audio=="object"&&(t=JSON.parse(JSON.stringify(t)),o(t.audio,"autoGainControl","mozAutoGainControl"),o(t.audio,"noiseSuppression","mozNoiseSuppression")),a(t)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const e=t.apply(this,arguments);return o(e,"mozAutoGainControl","autoGainControl"),o(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return this.kind==="audio"&&typeof e=="object"&&(e=JSON.parse(JSON.stringify(e)),o(e,"autoGainControl","mozAutoGainControl"),o(e,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[e])}}}}export{g as shimGetUserMedia};
