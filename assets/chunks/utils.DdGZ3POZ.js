let l=!0,h=!0;function f(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function y(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,o){if(s!==e)return i.apply(this,arguments);const c=g=>{const a=n(g);a&&(o.handleEvent?o.handleEvent(a):o(a))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(o,c),i.apply(this,[s,c])};const u=r.removeEventListener;r.removeEventListener=function(s,o){if(s!==e||!this._eventMap||!this._eventMap[e])return u.apply(this,arguments);if(!this._eventMap[e].has(o))return u.apply(this,arguments);const c=this._eventMap[e].get(o);return this._eventMap[e].delete(o),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[s,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function _(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(l=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function v(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(h=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function E(){if(typeof window=="object"){if(l)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function M(t,e){h&&console.warn(t+" is deprecated, please use "+e+" instead.")}function j(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(f(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(f(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(f(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=f(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function d(t){return Object.prototype.toString.call(t)==="[object Object]"}function b(t){return d(t)?Object.keys(t).reduce(function(e,n){const r=d(t[n]),i=r?b(t[n]):t[n],u=r&&!Object.keys(i).length;return i===void 0||u?e:Object.assign(e,{[n]:i})},{}):t}function p(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?p(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{p(t,t.get(i),n)})}))}function C(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const u=[];return t.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&u.push(s)}),u.forEach(s=>{t.forEach(o=>{o.type===r&&o.trackId===s.id&&p(t,o,i)})}),i}export{j as a,v as b,_ as c,M as d,f as e,C as f,b as g,E as l,y as w};
